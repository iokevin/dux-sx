function Waterfall(a){this.id="string"==typeof a.container?document.getElementById(a.container):a.container,this.colWidth=a.colWidth,this.colCount=a.colCount||4,this.cls=a.cls&&""!=a.cls?a.cls:"wf-cld",this.init()}Waterfall.prototype={getByClass:function(a,b){for(var c=[],d=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g"),e=b.getElementsByTagName("*"),f=e.length,g=0;f>g;g++)d.test(e[g].className)&&(c.push(e[g]),d.lastIndex=0);return c},maxArr:function(a){for(var b=a.length,c=a[0],d=1;b>d;d++)c<a[d]&&(c=a[d]);return c},getMar:function(a){var b=0;return a.currentStyle?b=parseInt(a.currentStyle.marginBottom):document.defaultView&&(b=parseInt(document.defaultView.getComputedStyle(a,null).marginBottom)),b},getMinCol:function(a){for(var b=a,c=b.length,d=b[0],e=0,f=0;c>f;f++)d>b[f]&&(d=b[f],e=f);return e},init:function(){for(var a=this,b=[],c=[],d=a.getByClass(a.cls,a.id),e=d.length,f=0;f<a.colCount;f++)b[f]=0;for(var f=0;e>f;f++)d[f].h=d[f].offsetHeight+a.getMar(d[f]),c[f]=f;for(var f=0;e>f;f++){var g=a.getMinCol(b);d[f].style.left=g*a.colWidth+"px",d[f].style.top=b[g]+"px",b[g]+=d[f].h}a.id.style.height=a.maxArr(b)+"px"}},ZDK.define("module.slide",function(){var a=function(a){return this instanceof arguments.callee?(this.entry(a),void 0):new arguments.callee(a)};return a.prototype={entry:function(a){var b=this.opche=$.extend({target:null,item:"li",prev:null,next:null,step:1,size:0,time:200,timeout:0,loop:!0,path:!1,moreLink:!1,isRound:!1,oninited:null},a);this.target=$(b.target),this.target.children().length<2||(this.width=this.target.parent().outerWidth(this),this.itemList="string"==typeof b.item?this.target.find(b.item):b.item,this.number=this.itemList.length,this.perWidth=this.itemList.eq(0).outerWidth(!0),this.perHeight=this.itemList.eq(0).outerHeight(!0),this.size=b.size||Math.floor(this.width/this.perWidth),this.step=1==this.size||b.step>this.size?1:b.step,this.hv=b.path?"marginTop":"marginLeft",this.index=this.oindex=0,this.maxIndex=1==this.size?this.number-1:this.number-this.size,this.init(),this.bind(),this.autoPlay(),this.opche.oninited&&this.opche.oninited(this))},init:function(){if(1!==this.size){var a=this.opche.path?this.perWidth:this.size*this.perWidth,b=this.opche.path?this.size*this.perHeight:this.perHeight;if(this.opche.isRound&&this.size<this.number){var c=-(this.number-this.size)*(this.opche.pache?this.perWidth:this.perHeight);this.target.prepend(this.itemList.slice(this.size).clone()).append(this.itemList.slice(0,this.size).clone()),this.number*=2,this.maxIndex=this.number-this.size,this.index=this.number/2-this.size,this.target.css(this.hv,c)}this.scroll=$("<div></div>").css({position:"relative",width:a,height:b,overflow:"hidden"}).appendTo(this.target.parent()).append(this.target),!this.opche.path&&this.target.css("width",this.number*this.perWidth+100)}else this.target.css({position:"relative",overflow:"hidden",padding:"0",width:this.perWidth,height:this.perHeight}),this.itemList.css({position:"absolute",left:this.perWidth+100,top:this.perHeight+100}),this.itemList.eq(0).css({left:0,top:0})},bind:function(){var a=this,b=this.opche;if(b.moreLink){if(b.prev&&$(b.prev).click(function(){var c=$(b.next);c[0].clickCount=0,c.hasClass("channel-bar-slide-more")&&c.removeClass("channel-bar-slide-more").attr("data-more",c.attr("href")).attr("href","###").attr("target","").html('<i class="iconfont">&#xe822;</i>'),a.prev()}),b.next){var c=$(b.next);c[0].clickCount=0,c.click(function(b){2==c[0].clickCount&&($(this).addClass("channel-bar-slide-more").attr("href",$(this).attr("data-more")).html("查看更多交易").attr("target","_blank"),b.preventDefault()),c[0].clickCount++,a.next()})}}else b.prev&&$(b.prev).click(function(){a.prev()}),b.next&&$(b.next).click(function(){a.next()})},autoPlay:function(a){var b=this;return a?b.timer&&clearInterval(b.timer):b.opche.timeout&&(b.timer=setInterval(function(){b.go(b.index+=b.step)},b.opche.timeout)),!0},prev:function(){this.playing||((this.index-=this.step)<0&&0!=this.oindex&&(this.index=0),this.go(this.index,this.autoPlay(!0)),this.trigger("prev",{target:this,index:this.index,oindex:this.oindex}))},next:function(){this.playing||((this.index+=this.step)>this.maxIndex&&this.oindex!=this.maxIndex&&(this.index=this.maxIndex),this.go(this.index,this.autoPlay(!0)),this.trigger("next",{target:this,index:this.index,oindex:this.oindex}))},go:function(a,b){var c=this;this.playing||((this.index=a)<0?this.opche.isRound?(this.target.css(this.hv,-this.number/2*this.perHeight),this.index=this.number/2-this.size):this.index=this.opche.loop?this.maxIndex:0:this.index>this.maxIndex&&(this.opche.isRound?(this.target.css(this.hv,-(this.number/2-this.size)*this.perHeight),this.index=this.number/2):this.index=this.opche.loop?0:this.maxIndex),c.size<c.number&&this.play(b))},play:function(a){var b=this,c={};if("number"==typeof a){if(a==this.index)return;return b.go(a,this.autoPlay(!0))}if(b.playing=!0,b.trigger("play",{target:b,index:b.index,oindex:b.oindex}),1==b.size){var d=b.direction();return b.itemList.eq(b.oindex).animate({left:d[0].l,top:d[0].t},"slow",function(){a&&b.autoPlay(),b.oindex=b.index,b.playing=!1}),b.itemList.eq(b.index).css({left:d[1].l,top:d[1].t}).animate({left:0,top:0},b.opche.time)}b.opche.path?c.marginTop=-b.index*b.perHeight:c.marginLeft=-b.index*b.perWidth,b.target.animate(c,b.opche.time,function(){a&&b.autoPlay(),b.playing=!1,b.oindex=b.index})},direction:function(){var a=this.perHeight,b=this.perWidth,c=this.opche.path;switch(this.path="number"==typeof c?1+8*Math.random():this.oindex>this.index?c?2:4:c?1:3,this.path){case 1:return[{t:-a},{l:0,t:a}];case 2:return[{t:a},{l:0,t:-a}];case 3:return[{l:-b},{t:0,l:b}];case 4:return[{l:b},{t:0,l:-b}];case 5:return[{l:-b,t:-a},{t:a,l:b}];case 6:return[{l:b,t:-a},{t:a,l:-b}];case 7:return[{l:-b,t:a},{t:-a,l:b}];default:return[{l:b,t:a},{t:-a,l:-b}]}}},ZDK.procopy(a,ZDK.EventEmitter)}),function(){var a={updateTaglistLayout:function(){var a=$("#J-tag-container"),b=a.find(".index-taglist"),c=$('<div style="margin-top: 20px; text-align: center">加载中..</div>');c.appendTo(a);var d=a.find(".index-listitem")[0].offsetWidth,e=b.width(),f=parseInt(e/d),g=f-1,h=(e-d*f)/g-2;new Waterfall({container:b[0],colWidth:d+h,colCount:f,cls:"index-listitem"}),b.css({visibility:"visible"}),c.remove()},lazyLoad:function(){$("img.lazyload").lazyload({effect:"fadeIn"})},ie6Need:function(){$(".index-listitem").ie6hover()},tabChange:function(a){var b=$.extend({warper:$(".index-seller-tab"),tab:".ui-tab-nav li",curClass:"active",change:"ul.ui-tab-bd",more:".ui-tab-more a",type:"click"},a||{});b.warper.each(function(){var a=$(this),c=a.find(b.tab),d=a.find(b.change),e=a.find(b.more);c.bind(b.type,function(){d.hide().eq($(this).index()).show().find("img.lazyload").trigger("appear"),e.attr("href",$(this).attr("data-morelink")),c.removeClass(b.curClass),$(this).addClass(b.curClass)})})},newsSlide:function(){function a(){var a=arguments.callee;b=setTimeout(function(){c.animate({marginTop:-g*e},"fast",function(){g+=1,3==g&&(c.css("marginTop",0),g=1)}),a()},2e3)}{var b,c=$("#J-news-slide"),d=c.parent(".item-bd"),e=d.height(),f=c.find("li"),g=1;Math.ceil(2*f.length/3)}c.append(f.clone()),c.hover(function(){clearTimeout(b)},function(){a()}),a()},init:function(){this.updateTaglistLayout(),this.lazyLoad(),this.tabChange(),this.tabChange({warper:$(".index-task"),tab:".index-task-nav span",curClass:"active",change:".index-task-bd",type:"click"}),this.newsSlide(),this.ie6Need(),this.initUpdateStatusData()},updateLogo:function(){var a=new Image;a.src=ZBJInfo.staticURI+"/t5s/lib/img/2014_hello.png";var b=(new Date,$("#j-zbj-header").find(".ui-logo-main img"));b.fadeOut(function(){b.attr("src",ZBJInfo.staticURI+"/t5s/lib/img/2014_hello.png").fadeIn()})},initUpdateStatusData:function(){function a(a,b){return b=b||1,Math.floor(Math.random()*(a-b+1)+b)}function b(a){a+="";for(var b=a.split("."),c=b[0],d=b.length>1?"."+b[1]:"",e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return c+d}function c(c){var d=e.increaseNum[c],f=a(d[1],d[0]),g=$("#j-"+c).text();g=g.replace(/[^0-9]/g,""),g=1*g+f,$("#j-"+c).text(b(g))}function d(b){c(b),"state-task-num"==b&&c("state-task-amount");var f=a(e.updateTimer[b]);setTimeout(function(){d(b)},1e3*f)}var e={increaseNum:{"state-task-num":[0,2],"state-task-amount":[400,1e3],"state-talent-num":[0,5]},updateTimer:{"state-talent-num":10,"state-task-num":20}};$.get("/main/Ajaxtradecount",function(a){$("#j-state-talent-num").html(a.talent_num),$("#j-state-task-num").html(a.task_num),$("#j-state-task-amount").html(a.task_amount),d("state-task-num"),d("state-talent-num")},"json")}};a.init()}(),ZDK.lazy(function(){var a=ZDK.module.slide({target:$("#J-index-slide"),item:".ui-slide-item",timeout:5e3,time:600,path:!0,oninited:function(a){for(var b=['<ul class="ui-slide-index">'],c=0,d=a.number;d>c;c++)c==a.index?b.push('<li class="cur">',c+1,"</li>"):b.push("<li >",c+1,"</li>");b.push("</ul>");var e=$(b.join(""));a.cur=e.find("li").click(function(){var b=$(this),c=0^b.html();a.play(c-1)}),a.target.parent().append(e)}});a.on("play",function(b){var c=b.index;a.cur.eq(c).parent().find(".cur").removeClass("cur"),a.cur.eq(c).addClass("cur")})});